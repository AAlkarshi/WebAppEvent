{% extends 'base.html.twig' %}
{% block title %}Mes événements inscrits{% endblock %}

{% block body %}
<h1>🎟️ Mes événements inscrits</h1>

{% for message in app.flashes('success') %}
    <div class="alert alert-success">{{ message }}</div>
{% endfor %}
{% for message in app.flashes('info') %}
    <div class="alert alert-info">{{ message }}</div>
{% endfor %}
{% for message in app.flashes('error') %}
    <div class="alert alert-danger">{{ message }}</div>
{% endfor %}

{% if registrations is empty %}
    <p>Aucun événement pour le moment.</p>
{% else %}
    <ul>
        {% for reg in registrations %}
            <li style="display: flex; align-items: center; justify-content: space-between; padding: 10px; border: 1px solid #ccc; border-radius: 10px; margin-bottom: 10px;">
    <!-- Partie gauche : image et infos -->
    <div style="display: flex; align-items: center; gap: 15px;">
        <img src="{{ asset('uploads/avatars/' ~ reg.event.imageEvent) }}" 
             alt="{{ reg.event.titleEvent }}" 
             style="height: 130px; width: 130px; object-fit: cover; border-radius: 10px;">
        <div>
    <strong>{{ reg.event.titleEvent }}</strong> — {{ reg.event.dateTimeEvent|date('d/m/Y H:i') }} <br>
        {{ reg.event.nbxParticipant }} / 
        {% if reg.event.nbxParticipantMax is not null %}
            {{ reg.event.nbxParticipantMax }}
        {% else %}
            Illimité
        {% endif %} Participants
    </div>

    </div>

    <!-- Partie droite : bouton -->
    <div>
        <a href="{{ path('event_unregister', {id: reg.event.id}) }}" 
           class="btn btn-danger" 
           style="height: 130px; width: 130px; display: flex; align-items: center; justify-content: center; text-align: center; font-weight: bold;">
            Se désinscrire
        </a>
    </div>
</li>

        {% endfor %}
    </ul>
{% endif %}
{% endblock %}
